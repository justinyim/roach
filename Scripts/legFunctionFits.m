% Curve fits for leg parameters from test stand calibration.  Used by lut.m
% to generate look up tables in lut.h.
% See stand_data2.m for polynomial curve fits.

% Unused
model(1).f_crank = @(x) 2.003.*x.^5.0 + 7.434.*x.^4.0 + 9.429.*x.^3.0 + 2.691.*x.^2.0 + 0.3893.*x + 0.001175;
model(1).f_fd = @(x) - 0.04776*x.^3 + 0.1042*x.^2 + 0.05917*x + 0.07623;
model(1).f_MA = @(x) -4963*x.^3-1060*x.^2-75.7*x+1.961;

% Rudolph parameters 6/18/2018 (kinematic) through 6/22/2018 (spring and friction)
model(2).f_crank = @(x) x.*(-5.545933486743863e-1)-x.^2.*4.861385182590551-x.^3.*3.076529866354905...
    -x.^4.*1.110905627213665-x.^5.*6.960572009953411e-2-4.410270509582694e-2;
model(2).f_fd = @(x) -x.*(-9.689463228112449e-2)+x.^2.*6.989908944388874e-2-x.^3.*4.630772363424869e-2 + 0.09;
%model(2).f_fd = @(x) x.*(-9.689463228112449e-2)+x.^2.*6.989908944388874e-2+x.^3.*4.630772363424869e-2-5.642477851770554e-4;
f_MA_fit = @(x) (x.*9.722770365181102+x.^2.*9.229589599064714+x.^3.*4.443622508854662+...
    x.^4.*3.480286004976706e-1+5.545933486743863e-1)./...
    (x.*1.397981788877775e-1+x.^2.*1.389231709027461e-1-9.689463228112449e-2);
model(2).f_MA = @(x) (f_MA_fit(x)>1).*(f_MA_fit(x)-1) + 1;
model(2).f_MA_crank_foot = @(x) 7*-6.565e+07*x.^6 + 6*3.091e+07*x.^5 -5.884e+06*5*x.^4 + ...
    5.644e+05*4*x.^3 -2.751e+04*3*x.^2 + 455*2*x - 6.298;
model(2).f_spring = @(x,w) (x.*3.836493898315605e-1+x.^2.*2.9279712493158e-2).*(1 - 0.13*max(min(-0.05*w,1),-1));%-30*w,1),-1));
model(2).f_fric = @(x,w) (x.*3.836493898315605e-1+x.^2.*2.9279712493158e-2).*(0.13*max(min(-0.05*w,1),-1));%-30*w,1),-1));

%- 0.05*max(min(30*w,1),-1).*x;

%{a
% Dasher parameters 6/25/2018 (kinematics) through
%model(3).f_crank = @(x) x.*(-2.219771122747685e-1)-x.^2.*3.934037595625176-x.^3.*2.017414906463222-...
%    x.^4.*1.677073832029953e-1+x.^5.*2.253083088706445e-1-1.883563826690602e-1;
model(3).f_crank = @(x) 1.02*x.^5+2.216*x.^4+0.7596*x.^3-2.773*x.^2-0.01726*x-0.1533;
    % For f_crank fit see 2018.08.06_15.59.35_trial_imudata and EngineeringNotes.txt 6 Augsust 2018
model(3).f_fd = @(x) -x.*(-1.10783409238789e-1)+x.^2.*3.18398134512155e-2-x.^3.*2.62460134201421e-2 + 0.09;
%model(3).f_fd = @(x) x.*(-1.10783409238789e-1)+x.^2.*3.18398134512155e-2+x.^3.*2.62460134201421e-2+4.704086838000678e-4;
f_MA_fit = @(x) (x.*7.868075191250353+x.^2.*6.052244719389666+x.^3.*6.708295328119813e-1-...
    x.^4.*1.126541544353222+2.219771122747685e-1)./...
    (x.*6.367962690243101e-2+x.^2.*7.873804026042631e-2-1.10783409238789e-1);
model(3).f_MA = @(x) (f_MA_fit(x)>1).*(f_MA_fit(x)-1) + 1;
model(3).f_MA_crank_foot = @(x) x.*(-2.499722373702723e2)+x.^2.*3.189439407444873e4-...
    x.^3.*2.631245153716756e6+x.^4.*8.301984361893313e7-x.^5.*1.32557409958358e9+...
    x.^6.*1.149347868439528e10-x.^7.*5.174523608827692e10+x.^8.*9.47419858088114e10-3.262662906298623;
model(3).f_spring = @(x,w) (x.*3.759274976416161e-1+x.^2.*4.275050419811049e-2).*(1 - 0.18*max(min(-0.05*w,1),-1));%-30*w,1),-1));
model(3).f_fric = @(x,w) (x.*3.759274976416161e-1+x.^2.*4.275050419811049e-2).*(0.18*max(min(-0.05*w,1),-1));%-30*w,1),-1));
